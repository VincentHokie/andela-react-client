{"version":3,"file":"setup.js","sources":["../src/localstorage.js","../src/setup.js"],"sourcesContent":["export class LocalStorage {\n  constructor() {\n    this.store = {};\n  }\n\n  clear() {\n    this.store = {};\n  }\n\n  getItem(key) {\n    return this.store[key] || null;\n  }\n\n  setItem(key, value = '') {\n    // not mentioned in the spec, but we must always coerce to a string\n    this.store[key] = value + '';\n  }\n\n  removeItem(key) {\n    delete this.store[key];\n  }\n\n  key(index) {\n    const keys = Object.keys(this.store);\n    return keys[index] || null;\n  }\n\n  get length() {\n    return Object.keys(this.store).length;\n  }\n\n  toString() {\n    return '[object Storage]';\n  }\n}\n","import { LocalStorage } from './localstorage';\n\nconst local = new LocalStorage();\nconst session = new LocalStorage();\n\nglobal.localStorage = {\n  clear: jest.fn(() => local.clear()),\n  getItem: jest.fn(key => local.getItem(key)),\n  setItem: jest.fn((key, value) => local.setItem(key, value)),\n  removeItem: jest.fn(key => local.removeItem(key)),\n  key: jest.fn(index => local.key(index)),\n  toString: jest.fn(() => local.toString()),\n  get __STORE__() {\n    return local.store;\n  },\n  set __STORE__(store) {\n    local.store = store;\n  },\n  get length() {\n    return local.length;\n  },\n};\n\nglobal.sessionStorage = {\n  clear: jest.fn(() => session.clear()),\n  getItem: jest.fn(key => session.getItem(key)),\n  setItem: jest.fn((key, value) => session.setItem(key, value)),\n  removeItem: jest.fn(key => session.removeItem(key)),\n  key: jest.fn(index => session.key(index)),\n  toString: jest.fn(() => session.toString()),\n  get __STORE__() {\n    return session.store;\n  },\n  set __STORE__(store) {\n    session.store = store;\n  },\n  get length() {\n    return session.length;\n  },\n};\n"],"names":["LocalStorage","store","key","value","index","keys","Object","length","local","session","global","localStorage","jest","fn","clear","getItem","setItem","removeItem","toString","__STORE__","sessionStorage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAaA,YAAb;0BACgB;;;SACPC,KAAL,GAAa,EAAb;;;;;4BAGM;WACDA,KAAL,GAAa,EAAb;;;;4BAGMC,GATV,EASe;aACJ,KAAKD,KAAL,CAAWC,GAAX,KAAmB,IAA1B;;;;4BAGMA,GAbV,EAa2B;UAAZC,KAAY,uEAAJ,EAAI;;;WAElBF,KAAL,CAAWC,GAAX,IAAkBC,QAAQ,EAA1B;;;;+BAGSD,GAlBb,EAkBkB;aACP,KAAKD,KAAL,CAAWC,GAAX,CAAP;;;;wBAGEE,KAtBN,EAsBa;UACHC,OAAOC,OAAOD,IAAP,CAAY,KAAKJ,KAAjB,CAAb;aACOI,KAAKD,KAAL,KAAe,IAAtB;;;;+BAOS;aACF,kBAAP;;;;2BALW;aACJE,OAAOD,IAAP,CAAY,KAAKJ,KAAjB,EAAwBM,MAA/B;;;;;;AC1BJ,IAAMC,QAAQ,IAAIR,YAAJ,EAAd;AACA,IAAMS,UAAU,IAAIT,YAAJ,EAAhB;;AAEAU,OAAOC,YAAP,GAAsB;SACbC,KAAKC,EAAL,CAAQ;WAAML,MAAMM,KAAN,EAAN;GAAR,CADa;WAEXF,KAAKC,EAAL,CAAQ;WAAOL,MAAMO,OAAN,CAAcb,GAAd,CAAP;GAAR,CAFW;WAGXU,KAAKC,EAAL,CAAQ,UAACX,GAAD,EAAMC,KAAN;WAAgBK,MAAMQ,OAAN,CAAcd,GAAd,EAAmBC,KAAnB,CAAhB;GAAR,CAHW;cAIRS,KAAKC,EAAL,CAAQ;WAAOL,MAAMS,UAAN,CAAiBf,GAAjB,CAAP;GAAR,CAJQ;OAKfU,KAAKC,EAAL,CAAQ;WAASL,MAAMN,GAAN,CAAUE,KAAV,CAAT;GAAR,CALe;YAMVQ,KAAKC,EAAL,CAAQ;WAAML,MAAMU,QAAN,EAAN;GAAR,CANU;MAOhBC,SAAJ,GAAgB;WACPX,MAAMP,KAAb;GARkB;MAUhBkB,SAAJ,CAAclB,KAAd,EAAqB;UACbA,KAAN,GAAcA,KAAd;GAXkB;MAahBM,MAAJ,GAAa;WACJC,MAAMD,MAAb;;CAdJ;;AAkBAG,OAAOU,cAAP,GAAwB;SACfR,KAAKC,EAAL,CAAQ;WAAMJ,QAAQK,KAAR,EAAN;GAAR,CADe;WAEbF,KAAKC,EAAL,CAAQ;WAAOJ,QAAQM,OAAR,CAAgBb,GAAhB,CAAP;GAAR,CAFa;WAGbU,KAAKC,EAAL,CAAQ,UAACX,GAAD,EAAMC,KAAN;WAAgBM,QAAQO,OAAR,CAAgBd,GAAhB,EAAqBC,KAArB,CAAhB;GAAR,CAHa;cAIVS,KAAKC,EAAL,CAAQ;WAAOJ,QAAQQ,UAAR,CAAmBf,GAAnB,CAAP;GAAR,CAJU;OAKjBU,KAAKC,EAAL,CAAQ;WAASJ,QAAQP,GAAR,CAAYE,KAAZ,CAAT;GAAR,CALiB;YAMZQ,KAAKC,EAAL,CAAQ;WAAMJ,QAAQS,QAAR,EAAN;GAAR,CANY;MAOlBC,SAAJ,GAAgB;WACPV,QAAQR,KAAf;GARoB;MAUlBkB,SAAJ,CAAclB,KAAd,EAAqB;YACXA,KAAR,GAAgBA,KAAhB;GAXoB;MAalBM,MAAJ,GAAa;WACJE,QAAQF,MAAf;;CAdJ"}